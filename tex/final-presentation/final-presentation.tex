% !TEX TS-program = xelatex
%
\documentclass[aspectratio=169]{beamer}

\input{../common.tex}

\newcolumntype{R}{>{\raggedleft\arraybackslash}X}
\newcolumntype{C}{>{\centering\arraybackslash}X}

\newcommand\green[1]{{\color{green(ncs)}#1}}
\newcommand\red[1]{{\color{amaranth}#1}}

\begin{document}
  \maketitle

  \begin{frame}{Outline}
    \begin{itemize}
      \item Introduction
      \item What is the Internet of things?
      \item What is serverless computing?
      \item Architecture
      \item Background
      \item Implementation
      \item Results
      \item Conclusion
    \end{itemize}
  \end{frame}

  \begin{frame}{Introduction}
    \begin{itemize}
      \item collect data from various devices
      \item devices post data to broker
      \item serverless function called depending on data type
      \item data saved in database
      \item web application to visualize data and statistics
    \end{itemize}
  \end{frame}

  \begin{frame}{What is the Internet of things (IoT)?}
    \begin{itemize}
      \item everyday objects (things) connected to the Internet
      \item collection of switches and sensors
      \item controlled or monitored remotely via the Internet or by other IoT devices
    \end{itemize}
  \end{frame}

  \begin{frame}{What is serverless computing?}
    \begin{itemize}
      \item confusing name, actually still requires servers
      \item cloud provider runs master server
      \item master server manages scaling and allocates resources
      \item functions deployed on-demand
    \end{itemize}
  \end{frame}

  \input{architecture.tex}
  \input{background.tex}

  \begin{frame}{Implementation -- Rakefile}
    \begin{itemize}
      \item tasks for various different jobs
      \item deployment with a single command \lstinline{rake deploy}
      \item support for building, pushing and deploying single functions
    \end{itemize}
  \end{frame}

  \begin{frame}{Implementation -- Kafka}
    \begin{itemize}
      \item first point of contact for edge devices
      \item Zookeeper
      \item Kafka REST endpoint for edge devices
      \item Kafka Connector for invoking functions
      \item Kafka Topics UI
    \end{itemize}
  \end{frame}

  \begin{frame}[fragile]{Implementation -- MongoDB}
    \begin{columns}
      \column{0.4\textwidth}
        \begin{itemize}
          \item issues
          \item architecture of \texttt{sensordata} database
            \begin{itemize}
              \item collection per sensor type
              \item differ depending on amount of returned values
            \end{itemize}
          \item devices have to be registered
        \end{itemize}
        \column{0.6\textwidth}
          \begin{lstlisting}[language=mongo, basicstyle=\scriptsize\ttfamily]
          {
            _id: 'c7704c421d7491ec',
            name: 'Samsung Galaxy S7',
            data_types: [
                'cpu_frequency',
                'proximity',
                'acceleration',
                'rotation',
                'pressure',
                'orientation',
                'gravity',
                'illuminance',
                'rotation_rate',
                'rotation_rate_uncalibrated',
                'magnetic_field',
                'magnetic_field_uncalibrated'
            ]
          }
          \end{lstlisting}
     \end{columns}
  \end{frame}

  \begin{frame}{Implementation -- Serverless Stack}
    \begin{columns}
      \column{0.4\textwidth}
        \begin{itemize}
          \item central part of the technology stack
          \item manages serverless functions
          \item first class Docker support
          \item configurable with a YAML file
          \item deployable with a single RAKE task
        \end{itemize}
        \column{0.6\textwidth}
        \vfill
        \centering
        \includegraphics[height=15em]{openfaas-dashboard-small.png}
     \end{columns}
  \end{frame}

  \input{functions.tex}

  \begin{frame}{Implementation -- Mobile Application}
    \begin{itemize}
      \item gyroscope
            \hspace*{18.4em}
            \includegraphics[align=c,height=3em]{bmi160-sensor}
      \item accelerometer
      \item magnetometer
      \item barometer
            \hspace*{18,4em}
            \includegraphics[align=c,height=3em]{barometric-sensor}
      \item gravity
      \item illuminance (only Android)
      \item proximity (only Android)
    \end{itemize}
  \end{frame}

  \begin{frame}{Implementation -- Mobile Application}
    \begin{columns}
      \column{0.5\textwidth}
        \begin{itemize}
          \item basic workflow
          \item difficulties with platform specific requirements
          \item fist try with React Native
          \item final Implementation in Flutter
          \item consists of five Views
        \end{itemize}
        \column{0.5\textwidth}
        \vfill
        \vspace*{2em}
        \centering
        \includegraphics[height=16em]{mobile-sensor-ui.png}
     \end{columns}
  \end{frame}

  \input{raspberry-pi.tex}

  \begin{frame}{Implementation -- UI}
    \begin{columns}
      \column{0.35\textwidth}
        \begin{itemize}
          \item MarkoJS
          \item Babel
          \item Webpack
          \item SASS
        \end{itemize}
        \column{0.66\textwidth}
        \vfill
        \centering
        \includegraphics[width=24em]{serverless-ui-small.png}
     \end{columns}
  \end{frame}

  \begin{frame}{Schedule}
    \begin{itemize}
      \item March
        \begin{itemize}
          \item setup serverless stack
          \item start mobile application
        \end{itemize}
      \item April
        \begin{itemize}
          \item finish mobile application
          \item start Raspberry Pi application
          \item start web application
        \end{itemize}
      \item May
        \begin{itemize}
          \item finish Raspberry Pi application
          \item finish web application
          \item start written part
        \end{itemize}
      \item June
        \begin{itemize}
          \item finalize bachelorâ€™s thesis
        \end{itemize}
    \end{itemize}
  \end{frame}
\end{document}
